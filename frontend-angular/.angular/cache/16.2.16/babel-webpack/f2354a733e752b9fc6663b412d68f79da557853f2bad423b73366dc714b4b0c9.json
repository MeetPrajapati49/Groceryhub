{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../services/toast.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nfunction ForgotPasswordComponent_form_3_div_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Email is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ForgotPasswordComponent_form_3_div_4_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Enter a valid email\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ForgotPasswordComponent_form_3_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtemplate(1, ForgotPasswordComponent_form_3_div_4_div_1_Template, 2, 0, \"div\", 10);\n    i0.ɵɵtemplate(2, ForgotPasswordComponent_form_3_div_4_div_2_Template, 2, 0, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    let tmp_0_0;\n    let tmp_1_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r4.emailForm.get(\"email\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r4.emailForm.get(\"email\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"email\"]);\n  }\n}\nfunction ForgotPasswordComponent_form_3_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r5.error);\n  }\n}\nfunction ForgotPasswordComponent_form_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 4);\n    i0.ɵɵlistener(\"ngSubmit\", function ForgotPasswordComponent_form_3_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.requestCode());\n    });\n    i0.ɵɵelementStart(1, \"p\", 5);\n    i0.ɵɵtext(2, \"Enter your email to receive a reset code\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 6);\n    i0.ɵɵtemplate(4, ForgotPasswordComponent_form_3_div_4_Template, 3, 2, \"div\", 7);\n    i0.ɵɵelementStart(5, \"button\", 8);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, ForgotPasswordComponent_form_3_div_7_Template, 2, 1, \"div\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_1_0;\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.emailForm);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx_r0.emailForm.get(\"email\")) == null ? null : tmp_1_0.touched) && ((tmp_1_0 = ctx_r0.emailForm.get(\"email\")) == null ? null : tmp_1_0.invalid));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.emailForm.invalid || ctx_r0.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.loading ? \"Sending...\" : \"Send Reset Code\", \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.error);\n  }\n}\nfunction ForgotPasswordComponent_form_4_div_9_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Code is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ForgotPasswordComponent_form_4_div_9_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Code must be 6 digits\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ForgotPasswordComponent_form_4_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtemplate(1, ForgotPasswordComponent_form_4_div_9_div_1_Template, 2, 0, \"div\", 10);\n    i0.ɵɵtemplate(2, ForgotPasswordComponent_form_4_div_9_div_2_Template, 2, 0, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    let tmp_0_0;\n    let tmp_1_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r10.resetForm.get(\"code\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r10.resetForm.get(\"code\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"minlength\"]);\n  }\n}\nfunction ForgotPasswordComponent_form_4_div_11_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Password is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ForgotPasswordComponent_form_4_div_11_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Password must be at least 6 characters\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ForgotPasswordComponent_form_4_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtemplate(1, ForgotPasswordComponent_form_4_div_11_div_1_Template, 2, 0, \"div\", 10);\n    i0.ɵɵtemplate(2, ForgotPasswordComponent_form_4_div_11_div_2_Template, 2, 0, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    let tmp_0_0;\n    let tmp_1_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r11.resetForm.get(\"newPassword\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r11.resetForm.get(\"newPassword\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"minlength\"]);\n  }\n}\nfunction ForgotPasswordComponent_form_4_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1, \" Passwords do not match \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ForgotPasswordComponent_form_4_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r13.error);\n  }\n}\nfunction ForgotPasswordComponent_form_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 4);\n    i0.ɵɵlistener(\"ngSubmit\", function ForgotPasswordComponent_form_4_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.resetPassword());\n    });\n    i0.ɵɵelementStart(1, \"div\", 11)(2, \"span\", 12);\n    i0.ɵɵtext(3, \"\\uD83D\\uDD11\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Demo Mode: Your reset code is \");\n    i0.ɵɵelementStart(6, \"strong\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(8, \"input\", 13);\n    i0.ɵɵtemplate(9, ForgotPasswordComponent_form_4_div_9_Template, 3, 2, \"div\", 7);\n    i0.ɵɵelement(10, \"input\", 14);\n    i0.ɵɵtemplate(11, ForgotPasswordComponent_form_4_div_11_Template, 3, 2, \"div\", 7);\n    i0.ɵɵelement(12, \"input\", 15);\n    i0.ɵɵtemplate(13, ForgotPasswordComponent_form_4_div_13_Template, 2, 0, \"div\", 7);\n    i0.ɵɵelementStart(14, \"button\", 8);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, ForgotPasswordComponent_form_4_div_16_Template, 2, 1, \"div\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    let tmp_2_0;\n    let tmp_3_0;\n    let tmp_4_0;\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.resetForm);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r1.demoCode);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx_r1.resetForm.get(\"code\")) == null ? null : tmp_2_0.touched) && ((tmp_2_0 = ctx_r1.resetForm.get(\"code\")) == null ? null : tmp_2_0.invalid));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx_r1.resetForm.get(\"newPassword\")) == null ? null : tmp_3_0.touched) && ((tmp_3_0 = ctx_r1.resetForm.get(\"newPassword\")) == null ? null : tmp_3_0.invalid));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx_r1.resetForm.get(\"confirmPassword\")) == null ? null : tmp_4_0.touched) && ctx_r1.passwordMismatch);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.resetForm.invalid || ctx_r1.passwordMismatch || ctx_r1.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.loading ? \"Resetting...\" : \"Reset Password\", \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.error);\n  }\n}\nfunction ForgotPasswordComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"div\", 17);\n    i0.ɵɵtext(2, \"\\u2705\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h3\");\n    i0.ɵɵtext(4, \"Password Reset Successful!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6, \"You can now login with your new password.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"a\", 18);\n    i0.ɵɵtext(8, \"Go to Login\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ForgotPasswordComponent_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 19);\n    i0.ɵɵtext(1, \" Remember your password? \");\n    i0.ɵɵelementStart(2, \"a\", 20);\n    i0.ɵɵtext(3, \"Back to Login\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let ForgotPasswordComponent = /*#__PURE__*/(() => {\n  class ForgotPasswordComponent {\n    constructor(api, router, toast, fb) {\n      this.api = api;\n      this.router = router;\n      this.toast = toast;\n      this.fb = fb;\n      this.step = 1;\n      this.loading = false;\n      this.error = null;\n      this.demoCode = '';\n      this.email = '';\n      this.emailForm = this.fb.group({\n        email: ['', [Validators.required, Validators.email]]\n      });\n      this.resetForm = this.fb.group({\n        code: ['', [Validators.required, Validators.minLength(6)]],\n        newPassword: ['', [Validators.required, Validators.minLength(6)]],\n        confirmPassword: ['', [Validators.required]]\n      });\n    }\n    get passwordMismatch() {\n      return this.resetForm.get('newPassword')?.value !== this.resetForm.get('confirmPassword')?.value;\n    }\n    requestCode() {\n      if (this.emailForm.invalid) return;\n      this.loading = true;\n      this.error = null;\n      this.email = this.emailForm.value.email;\n      this.api.post('/auth/forgot-password', {\n        email: this.email\n      }).subscribe({\n        next: res => {\n          this.demoCode = res.code;\n          this.step = 2;\n          this.loading = false;\n          this.toast.show('Reset code generated!', 'success');\n        },\n        error: err => {\n          this.error = err.error?.error || 'Failed to send reset code';\n          this.loading = false;\n        }\n      });\n    }\n    resetPassword() {\n      if (this.resetForm.invalid || this.passwordMismatch) return;\n      this.loading = true;\n      this.error = null;\n      const {\n        code,\n        newPassword\n      } = this.resetForm.value;\n      this.api.post('/auth/reset-password', {\n        email: this.email,\n        code,\n        newPassword\n      }).subscribe({\n        next: () => {\n          this.step = 3;\n          this.loading = false;\n          this.toast.show('Password reset successful!', 'success');\n        },\n        error: err => {\n          this.error = err.error?.error || 'Failed to reset password';\n          this.loading = false;\n        }\n      });\n    }\n    static {\n      this.ɵfac = function ForgotPasswordComponent_Factory(t) {\n        return new (t || ForgotPasswordComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ToastService), i0.ɵɵdirectiveInject(i4.FormBuilder));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ForgotPasswordComponent,\n        selectors: [[\"app-forgot-password\"]],\n        decls: 7,\n        vars: 4,\n        consts: [[1, \"auth-container\"], [3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [\"class\", \"success-state\", 4, \"ngIf\"], [\"style\", \"margin-top:12px\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"subtitle\"], [\"formControlName\", \"email\", \"type\", \"email\", \"placeholder\", \"Email\", 1, \"auth-input\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"auth-button\", 3, \"disabled\"], [1, \"error-message\"], [4, \"ngIf\"], [1, \"demo-notice\"], [1, \"demo-icon\"], [\"formControlName\", \"code\", \"type\", \"text\", \"placeholder\", \"6-digit code\", \"maxlength\", \"6\", 1, \"auth-input\"], [\"formControlName\", \"newPassword\", \"type\", \"password\", \"placeholder\", \"New password\", 1, \"auth-input\"], [\"formControlName\", \"confirmPassword\", \"type\", \"password\", \"placeholder\", \"Confirm password\", 1, \"auth-input\"], [1, \"success-state\"], [1, \"success-icon\"], [\"routerLink\", \"/login\", 1, \"auth-button\", 2, \"display\", \"inline-block\", \"text-align\", \"center\", \"text-decoration\", \"none\"], [2, \"margin-top\", \"12px\"], [\"routerLink\", \"/login\"]],\n        template: function ForgotPasswordComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n            i0.ɵɵtext(2, \"Reset Password\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(3, ForgotPasswordComponent_form_3_Template, 8, 5, \"form\", 1);\n            i0.ɵɵtemplate(4, ForgotPasswordComponent_form_4_Template, 17, 8, \"form\", 1);\n            i0.ɵɵtemplate(5, ForgotPasswordComponent_div_5_Template, 9, 0, \"div\", 2);\n            i0.ɵɵtemplate(6, ForgotPasswordComponent_p_6_Template, 4, 0, \"p\", 3);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.step === 1);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.step === 2);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.step === 3);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.step !== 3);\n          }\n        },\n        dependencies: [i5.NgIf, i2.RouterLink, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.MaxLengthValidator, i4.FormGroupDirective, i4.FormControlName],\n        styles: [\".subtitle[_ngcontent-%COMP%]{color:#888;margin:0 0 20px;font-size:14px}.demo-notice[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f5e9,#c8e6c9);border:1px solid #81c784;border-radius:10px;padding:14px 18px;margin-bottom:18px;display:flex;align-items:center;gap:10px;font-size:14px}.demo-icon[_ngcontent-%COMP%]{font-size:20px}.demo-notice[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2e7d32;font-size:18px;letter-spacing:2px}.success-state[_ngcontent-%COMP%]{text-align:center;padding:20px 0}.success-icon[_ngcontent-%COMP%]{font-size:56px;margin-bottom:12px}.success-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#2e7d32}.success-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888;margin:0 0 24px}\"]\n      });\n    }\n  }\n  return ForgotPasswordComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}